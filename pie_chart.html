<html>  
<head>  

  <!DOCTYPE html>
  <meta charset="utf-8">
  <title>Pie Chart</title>
  <style>

    .arc text {
      font: 10px sans-serif;
      text-anchor: middle;
    }

    .arc path {
      stroke: #fff;
    }

  </style>
</head>

<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  
  <script>

    var width = 960,
    height = 500,
    radius = Math.min(width, height) / 2;

    var color = d3.scale.ordinal()
    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

    var color2 = d3.scale.category20();

    var arc = d3.svg.arc()
    .outerRadius(radius - 10)
    .innerRadius(0);

    var labelArc = d3.svg.arc()
    .outerRadius(radius - 40)
    .innerRadius(radius - 40);

    var arcOver = d3.svg.arc()
    .outerRadius(radius + 3);

    var pie = d3.layout.pie()
    .sort(null)
    .value(function(d) { return d.population; });

    var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    d3.csv("population.csv", type, function(error, data) {
      if (error) throw error;
      var pie1 = pie(data)
      var g = svg.selectAll(".arc")
      .data(pie1)
      .enter().append("g")
      .attr("class", "arc");

      g.append("path")
      .attr("d", arc)
      //style("fill", function(d){
        //return color(d.data.age);
      //}
      .attr("fill", function(d, i) {  
        return color2(i);
      })
      .on("mouseenter", function(d) {
        d3.select(this)
        .attr("stroke","white")
        .transition()
           .ease("elastic")    //linear, circle, elastic, bounce
           .duration(1000)
           .attr("d", arcOver)             
           .attr("stroke-width",6);
         })
      .on("mouseleave", function(d) {
        d3.select(this)
        .transition()            
        .attr("d", arc)
        .attr("stroke","white")
        .attr("stroke-width", 1);
      });

      g.append("text")
      .attr("transform", function(d) { return "translate(" + labelArc.centroid(d) + ")"; })
      .attr("dy", ".35em")
      .text(function(d) { return d.data.age });
    });

    function type(d) {
      d.population = +d.population;
      return d;
    }

  </script>
</body>
</html>